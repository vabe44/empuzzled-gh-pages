import{n as C,i as L,t as A,w as O,a as X}from"./JDb8DDjg.js";import{n as b,a_ as T,z as R,R as Y,g as F}from"#entry";const k=L?window:void 0;function w(s){var d;const c=T(s);return(d=c?.$el)!==null&&d!==void 0?d:c}function P(...s){const d=(t,n,u,a)=>(t.addEventListener(n,u,a),()=>t.removeEventListener(n,u,a)),c=b(()=>{const t=A(T(s[0])).filter(n=>n!=null);return t.every(n=>typeof n!="string")?t:void 0});return O(()=>{var t,n;return[(t=(n=c.value)===null||n===void 0?void 0:n.map(u=>w(u)))!==null&&t!==void 0?t:[k].filter(u=>u!=null),A(T(c.value?s[1]:s[0])),A(F(c.value?s[2]:s[1])),T(c.value?s[3]:s[2])]},([t,n,u,a],v,r)=>{if(!t?.length||!n?.length||!u?.length)return;const f=X(a)?{...a}:a,p=t.flatMap(x=>n.flatMap(h=>u.map(E=>d(x,h,E,f))));r(()=>{p.forEach(x=>x())})},{flush:"post"})}function B(s,d,c={}){const{window:t=k,ignore:n=[],capture:u=!0,detectIframe:a=!1,controls:v=!1}=c;if(!t)return v?{stop:C,cancel:C,trigger:C}:C;let r=!0;const f=e=>T(n).some(o=>{if(typeof o=="string")return Array.from(t.document.querySelectorAll(o)).some(i=>i===e.target||e.composedPath().includes(i));{const i=w(o);return i&&(e.target===i||e.composedPath().includes(i))}});function p(e){const o=T(e);return o&&o.$.subTree.shapeFlag===16}function x(e,o){const i=T(e),m=i.$.subTree&&i.$.subTree.children;return m==null||!Array.isArray(m)?!1:m.some(M=>M.el===o.target||o.composedPath().includes(M.el))}const h=e=>{const o=w(s);if(e.target!=null&&!(!(o instanceof Element)&&p(s)&&x(s,e))&&!(!o||o===e.target||e.composedPath().includes(o))){if("detail"in e&&e.detail===0&&(r=!f(e)),!r){r=!0;return}d(e)}};let E=!1;const y=[P(t,"click",e=>{E||(E=!0,setTimeout(()=>{E=!1},0),h(e))},{passive:!0,capture:u}),P(t,"pointerdown",e=>{const o=w(s);r=!f(e)&&!!(o&&!e.composedPath().includes(o))},{passive:!0}),a&&P(t,"blur",e=>{setTimeout(()=>{var o;const i=w(s);((o=t.document.activeElement)===null||o===void 0?void 0:o.tagName)==="IFRAME"&&!i?.contains(t.document.activeElement)&&d(e)},0)},{passive:!0})].filter(Boolean),S=()=>y.forEach(e=>e());return v?{stop:S,cancel:()=>{r=!1},trigger:e=>{r=!0,h(e),r=!1}}:S}function D(s,d={}){const{threshold:c=50,onSwipe:t,onSwipeEnd:n,onSwipeStart:u,passive:a=!0}=d,v=R({x:0,y:0}),r=R({x:0,y:0}),f=b(()=>v.x-r.x),p=b(()=>v.y-r.y),{max:x,abs:h}=Math,E=b(()=>x(h(f.value),h(p.value))>=c),y=Y(!1),S=b(()=>E.value?h(f.value)>h(p.value)?f.value>0?"left":"right":p.value>0?"up":"down":"none"),e=l=>[l.touches[0].clientX,l.touches[0].clientY],o=(l,g)=>{v.x=l,v.y=g},i=(l,g)=>{r.x=l,r.y=g},m={passive:a,capture:!a},M=l=>{y.value&&n?.(l,S.value),y.value=!1},I=[P(s,"touchstart",l=>{if(l.touches.length!==1)return;const[g,$]=e(l);o(g,$),i(g,$),u?.(l)},m),P(s,"touchmove",l=>{if(l.touches.length!==1)return;const[g,$]=e(l);i(g,$),m.capture&&!m.passive&&Math.abs(f.value)>Math.abs(p.value)&&l.preventDefault(),!y.value&&E.value&&(y.value=!0),y.value&&t?.(l)},m),P(s,["touchend","touchcancel"],M,m)];return{isSwiping:y,direction:S,coordsStart:v,coordsEnd:r,lengthX:f,lengthY:p,stop:()=>I.forEach(l=>l())}}export{D as a,B as o,w as u};
